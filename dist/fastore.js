"use strict";function _readOnlyError(e){throw new TypeError('"'+e+'" is read-only')}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).fastore={})}(void 0,function(e){function p(o){var t,e,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";function n(e){var t=Object.keys(o);return s&&(t=t.filter(function(e){return e.startsWith(s)}).map(function(e){return e.replace(s,"")})),"function"==typeof e&&t.forEach(e),t}function l(t){try{return JSON.parse(t)}catch(e){return t}}function r(e){switch(e.length){case 0:break;case 1:return l(o.getItem(s+e[0]));default:return u(e)}}function u(e){return(0<arguments.length&&void 0!==e?e:n()).reduce(function(e,t){return e[t]=r([t]),e},{})}function y(e){return(e=!Array.isArray(e)?String(e).split(/\s+|,/g):e).filter(function(e){return""!=(e=""+e)&&0==/[\s,]/.test(e)})}function i(e){return p(o,s?s+e:e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:t)}function f(i,f){function c(){return removeEventListener("storage",f)}var a=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if("function"==typeof i&&(f=i,i=""),"function"!=typeof f)throw new TypeError("The storage event handler must be a function.");return addEventListener("storage",function(e){var t=e.key,r=e.newValue,n=e.oldValue,o=e.url,u=e.storageArea;t.startsWith(s)&&(i=y(i),t.replace(s,""),_readOnlyError("key"),0!=i.length&&!i.includes(t)||!(e={ns:s,key:t,storageArea:u,newValue:l(r),oldValue:l(n),url:o||e.uri,namespace:s})!==f(e)&&!a||c())}),c}function c(e){return Array.isArray(e)?y(e).map(function(e){return r([e])}):r(y(e))}function a(t,n){if("object"==_typeof(t)&&!Array.isArray(t))return Object.keys(t).forEach(function(e){return a(e,t[e])});y(t).forEach(function(e,t){var r;o.setItem(s+e,(r=n,e=c(e),t=t,JSON.stringify("function"==typeof r?r(e,t):r)))})}t=function(e){if("string"!=typeof e)e=".";else{if(1!=e.length)throw new Error("The separator can only be one character.");if(/[\s,a-zA-Z0-9]/.test(e))throw new Error("The separator should not be comma, numbers, whitespace or letters.")}return e}(t=2<arguments.length?arguments[2]:void 0),e=s;s=(e=String(e).trim())?e+t:"";return Object.assign(function(r,e){switch(_typeof(r)){case"null":case"undefined":return u();case"function":return n(function(e,t){return r(e,c(e),t)});case"object":if(!Array.isArray(r))return a(r);default:return null!=e?a(r,e):c(r)}},{keys:n,has:function(e){return y(e).reduce(function(e,t){return o.hasOwnProperty(s+t)},!1)},size:function(){return(s?n():o).length},clear:function(){s?n().forEach(function(e){return o.removeItem(s+e)}):o.clear()},remove:function(e){y(e).forEach(function(e){return o.removeItem(s+e)})},get:c,set:a,on:f,once:function(e,t){return f(e,t,!0)},namespace:i,ns:i})}var t=p(global.sessionStorage),r=p(global.localStorage);e.wrapper=p,e.session=t,e.store=r,Object.defineProperty(e,"__esModule",{value:!0})});