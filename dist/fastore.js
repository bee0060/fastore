"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).fastore={})}(void 0,function(e){function a(s){var t,e,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";function r(e){var t=Object.keys(s);return l&&(t=t.filter(function(e){return e.startsWith(l)}).map(function(e){return e.replace(l,"")})),"function"==typeof e&&t.forEach(e),t}function y(t){try{return JSON.parse(t)}catch(e){return t}}function n(e){switch(e.length){case 0:break;case 1:return y(s.getItem(l+e[0]));default:return o(e)}}function o(e){return(0<arguments.length&&void 0!==e?e:r()).reduce(function(e,t){return e[t]=n([t]),e},{})}function p(e){return(e=!Array.isArray(e)?String(e).split(/\s+|,/g):e).filter(function(e){return""!=(e=""+e)&&0==/[\s,]/.test(e)})}function u(e){return a(s,l?l+e:e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:t)}function i(i,f){function e(e){var t=e.key,n=e.newValue,r=e.oldValue,o=e.url,u=e.storageArea;u==s&&t.startsWith(l)&&(i=p(i),t=t.replace(l,""),0!=i.length&&!i.includes(t)||!(e={ns:l,key:t,storageArea:u,newValue:y(n),oldValue:y(r),url:o||e.uri,namespace:l})!==f(e)&&!c||a())}var c=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=function(){return removeEventListener("storage",e)};if("function"==typeof i&&(f=i,i=""),"function"!=typeof f)throw new TypeError("The storage event handler must be a function.");return addEventListener("storage",e),a}function f(e){return Array.isArray(e)?p(e).map(function(e){return n([e])}):n(p(e))}function c(t,r){if("object"==_typeof(t)&&!Array.isArray(t))return Object.keys(t).forEach(function(e){return c(e,t[e])});p(t).forEach(function(e,t){var n;s.setItem(l+e,(n=r,e=f(e),t=t,JSON.stringify("function"==typeof n?n(e,t):n)))})}t=function(e){if("string"!=typeof e)e=".";else{if(1!=e.length)throw new Error("The separator can only be one character.");if(/[\s,a-zA-Z0-9]/.test(e))throw new Error("The separator should not be comma, numbers, whitespace or letters.")}return e}(t=2<arguments.length?arguments[2]:void 0),e=l;l=(e=String(e).trim())?e+t:"";return Object.assign(function(n,e){switch(_typeof(n)){case"null":case"undefined":return o();case"function":return r(function(e,t){return n(e,f(e),t)});case"object":if(!Array.isArray(n))return c(n);default:return null!=e?c(n,e):f(n)}},{keys:r,has:function(e){return p(e).reduce(function(e,t){return s.hasOwnProperty(l+t)},!1)},size:function(){return(l?r():s).length},clear:function(){l?r().forEach(function(e){return s.removeItem(l+e)}):s.clear()},remove:function(e){p(e).forEach(function(e){return s.removeItem(l+e)})},get:f,set:c,on:i,once:function(e,t){return i(e,t,!0)},namespace:u,ns:u})}var t="undefined"==typeof window?global:window,n=a(t.sessionStorage),t=a(t.localStorage);e.wrapper=a,e.session=n,e.store=t,Object.defineProperty(e,"__esModule",{value:!0})});